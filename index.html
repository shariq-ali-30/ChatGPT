<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sleek Responsive Weather Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the app background and font */
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            transition: background-color 0.5s ease;
        }

        /* Base background gradient (Fallback) */
        .app-background {
            background-image: linear-gradient(135deg, #1f2937 0%, #000000 100%);
        }

        /* Dynamic background classes based on weather condition */
        .bg-sunny {
            background-image: linear-gradient(135deg, #2b6cb0 0%, #3182ce 100%);
        }
        .bg-rain {
            background-image: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }
        .bg-cloudy {
            background-image: linear-gradient(135deg, #718096 0%, #a0aec0 100%);
        }
        .bg-storm {
            background-image: linear-gradient(135deg, #1a202c 0%, #000000 100%);
        }

        /* Frosted Glass Effect for the Card (Main Styling) */
        .frosted-glass {
            background-color: rgba(30, 41, 59, 0.4); /* Slate-800 with transparency */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* For Safari support */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Custom scrollbar for forecast (optional, for aesthetics) */
        .forecast-scroll::-webkit-scrollbar {
            height: 6px;
        }

        .forecast-scroll::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .forecast-scroll::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'card-bg': 'rgba(30, 41, 59, 0.6)',
                        'accent-blue': '#60a5fa',
                        'light-text': '#e5e7eb'
                    },
                }
            }
        }
    </script>
</head>
<body class="app-background" id="app-body">

    <!-- Main Weather Dashboard Container -->
    <div id="weather-container" class="w-full max-w-4xl mx-auto text-white rounded-2xl shadow-2xl p-6 md:p-10 frosted-glass transform transition-all duration-700 ease-in-out">
        
        <h1 class="text-3xl md:text-4xl font-extrabold text-center mb-8 tracking-wider text-accent-blue drop-shadow-lg">Global Weather Dashboard</h1>

        <!-- Search Input Section -->
        <div class="flex flex-col md:flex-row gap-3 mb-8">
            <input type="text" id="city-input" placeholder="Enter City (e.g., London, New York)" 
                   class="flex-grow p-4 rounded-xl bg-white/10 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-blue placeholder-gray-300 text-light-text text-lg shadow-inner"
                   onkeydown="if (event.key === 'Enter') searchWeather()">
            <button onclick="searchWeather()" class="px-6 py-4 bg-accent-blue hover:bg-blue-700 transition duration-300 rounded-xl shadow-lg font-semibold text-lg flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                </svg>
                Get Weather
            </button>
        </div>

        <!-- Weather Display Area -->
        <div id="weather-data" class="min-h-[250px] flex items-center justify-center">
            <!-- Initial Prompt -->
            <div class="text-center p-6 bg-white/5 rounded-xl border border-white/10">
                <p class="text-xl text-gray-300">Start by searching for a city. Examples: <span class="font-semibold text-accent-blue">London, New York, Tokyo, Sydney.</span></p>
                <p class="text-sm text-gray-500 mt-2">Data is simulated for demonstration.</p>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loading-spinner" class="hidden text-center mt-8">
            <div class="animate-spin rounded-full h-10 w-10 border-b-4 border-accent-blue mx-auto"></div>
            <p class="mt-3 text-xl text-accent-blue font-medium">Fetching the latest forecast...</p>
        </div>

        <!-- Error/Modal Message Box -->
        <div id="error-message" class="hidden p-4 mt-6 bg-red-900/40 border border-red-500/50 rounded-lg text-red-200 text-center">
            <!-- Error messages will appear here -->
        </div>

    </div>

    <script>
        // Set the global font for all content
        document.body.style.fontFamily = 'Inter, sans-serif';

        // --- Core Application Logic ---

        // 1. Mock Data for Simulation (Expanded with multi-day forecast and conditions)
        const MOCK_WEATHER_DATA = {
            "london": {
                current: { temp: 15, description: "Light Rain", icon: "üåßÔ∏è", humidity: 75, windSpeed: 12, feelsLike: 14, condition: "rain", pressure: 1012, uvIndex: 3 },
                forecast: [
                    { day: "Sun", temp: 16, icon: "üåßÔ∏è" },
                    { day: "Mon", temp: 18, icon: "‚òÅÔ∏è" },
                    { day: "Tue", temp: 20, icon: "üå§Ô∏è" },
                    { day: "Wed", temp: 17, icon: "üåßÔ∏è" }
                ]
            },
            "new york": {
                current: { temp: 28, description: "Sunny and Clear Skies", icon: "‚òÄÔ∏è", humidity: 55, windSpeed: 5, feelsLike: 30, condition: "sunny", pressure: 1020, uvIndex: 8 },
                forecast: [
                    { day: "Sun", temp: 29, icon: "‚òÄÔ∏è" },
                    { day: "Mon", temp: 27, icon: "‚òÄÔ∏è" },
                    { day: "Tue", temp: 25, icon: "üå§Ô∏è" },
                    { day: "Wed", temp: 26, icon: "‚òÅÔ∏è" }
                ]
            },
            "tokyo": {
                current: { temp: 22, description: "Partly Cloudy", icon: "‚òÅÔ∏è", humidity: 68, windSpeed: 8, feelsLike: 23, condition: "cloudy", pressure: 1015, uvIndex: 5 },
                forecast: [
                    { day: "Sun", temp: 23, icon: "‚òÅÔ∏è" },
                    { day: "Mon", temp: 25, icon: "üå§Ô∏è" },
                    { day: "Tue", temp: 21, icon: "üåßÔ∏è" },
                    { day: "Wed", temp: 24, icon: "‚òÄÔ∏è" }
                ]
            },
            "sydney": {
                current: { temp: 32, description: "Storms Developing", icon: "‚õàÔ∏è", humidity: 80, windSpeed: 25, feelsLike: 34, condition: "storm", pressure: 998, uvIndex: 6 },
                forecast: [
                    { day: "Sun", temp: 30, icon: "‚õàÔ∏è" },
                    { day: "Mon", temp: 28, icon: "üåßÔ∏è" },
                    { day: "Tue", temp: 26, icon: "‚òÅÔ∏è" },
                    { day: "Wed", temp: 27, icon: "‚òÄÔ∏è" }
                ]
            }
        };

        // 2. DOM Elements
        const cityInput = document.getElementById('city-input');
        const weatherDataEl = document.getElementById('weather-data');
        const loadingSpinner = document.getElementById('loading-spinner');
        const appBody = document.getElementById('app-body');
        const errorMessageEl = document.getElementById('error-message');

        /**
         * Utility function to display custom messages (like alerts/errors).
         * @param {string} message - The message to display.
         * @param {boolean} isError - True for error style, false for success/info.
         */
        function showMessage(message, isError = true) {
            errorMessageEl.innerHTML = `<p class="font-semibold">${isError ? 'Error: ' : 'Info: '}</p><p>${message}</p>`;
            errorMessageEl.classList.remove('hidden');
            errorMessageEl.classList.toggle('bg-red-900/40', isError);
            errorMessageEl.classList.toggle('border-red-500/50', isError);
            errorMessageEl.classList.toggle('bg-green-900/40', !isError);
            errorMessageEl.classList.toggle('border-green-500/50', !isError);
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                errorMessageEl.classList.add('hidden');
            }, 5000);
        }

        /**
         * Sets the dynamic background based on the weather condition.
         * @param {string} condition - The weather condition string.
         */
        function setDynamicBackground(condition) {
            // Remove all existing background classes
            appBody.classList.remove('bg-sunny', 'bg-rain', 'bg-cloudy', 'bg-storm', 'app-background');

            // Add the appropriate dynamic class or fallback
            switch (condition.toLowerCase()) {
                case 'sunny':
                    appBody.classList.add('bg-sunny');
                    break;
                case 'rain':
                    appBody.classList.add('bg-rain');
                    break;
                case 'cloudy':
                    appBody.classList.add('bg-cloudy');
                    break;
                case 'storm':
                    appBody.classList.add('bg-storm');
                    break;
                default:
                    appBody.classList.add('app-background'); // Fallback to base gradient
            }
        }

        /**
         * Simulates fetching weather data from a remote API.
         * @param {string} city - The city name to search for.
         * @returns {Promise<object>} A promise that resolves with weather data or rejects if the city is unknown.
         */
        function fetchWeather(city) {
            return new Promise((resolve, reject) => {
                // Simulate network latency (1.5 seconds)
                setTimeout(() => {
                    const normalizedCity = city.toLowerCase().trim();
                    const data = MOCK_WEATHER_DATA[normalizedCity];
                    
                    if (data) {
                        resolve({ 
                            city: city.trim().split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '),
                            ...data
                        });
                    } else {
                        reject(new Error("City data not found. Please try one of the simulated cities: London, New York, Tokyo, or Sydney."));
                    }
                }, 1500); 
            });
        }

        /**
         * Generates the HTML for the detailed current weather and 4-day forecast.
         * @param {object} data - The complete weather data object.
         */
        function generateWeatherHtml(data) {
            const current = data.current;

            // Generate HTML for the 4-day forecast
            const forecastHtml = data.forecast.map(day => `
                <div class="flex flex-col items-center justify-center p-4 bg-white/5 rounded-xl transition duration-300 hover:bg-white/10 shadow-md">
                    <p class="text-sm font-semibold text-gray-300">${day.day}</p>
                    <div class="text-3xl my-2">${day.icon}</div>
                    <p class="text-xl font-bold text-light-text">${day.temp}¬∞C</p>
                </div>
            `).join('');


            return `
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <!-- 1. Current Weather (Large Column on Mobile, 2/3rds on Desktop) -->
                    <div class="lg:col-span-2 p-6 rounded-2xl bg-white/5 shadow-2xl backdrop-blur-md border border-white/10">
                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                            <div>
                                <h2 class="text-5xl md:text-6xl font-extrabold text-light-text mb-1">${data.city}</h2>
                                <p class="text-2xl text-accent-blue font-semibold">${current.description}</p>
                                <p class="text-sm text-gray-400 mt-1">Today, ${new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}</p>
                            </div>
                            <div class="text-7xl md:text-9xl mt-4 sm:mt-0 drop-shadow-lg">${current.icon}</div>
                        </div>

                        <div class="flex justify-center items-center my-6">
                            <p class="text-8xl md:text-[120px] font-thin leading-none text-white">${current.temp}<span class="text-5xl align-top">¬∞C</span></p>
                        </div>
                        
                        <!-- Details Grid -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-4 border-t border-white/10">
                            ${detailBox('Feels Like', `${current.feelsLike}¬∞C`, 'üå§Ô∏è')}
                            ${detailBox('Wind Speed', `${current.windSpeed} km/h`, 'üí®')}
                            ${detailBox('Humidity', `${current.humidity}%`, 'üíß')}
                            ${detailBox('Pressure', `${current.pressure} hPa`, 'üìä')}
                        </div>
                    </div>

                    <!-- 2. Detailed Forecast (Right Column on Desktop, Bottom on Mobile) -->
                    <div class="lg:col-span-1">
                        <h3 class="text-2xl font-bold mb-4 text-light-text border-b border-white/10 pb-2">4-Day Forecast</h3>
                        <div class="grid grid-cols-2 gap-4 lg:flex lg:flex-col lg:gap-3 forecast-scroll">
                            ${forecastHtml}
                        </div>
                    </div>
                </div>
            `;
        }

        /**
         * Helper function to generate a reusable detail box HTML fragment.
         * @param {string} label - The metric name (e.g., Wind Speed).
         * @param {string} value - The metric value (e.g., 12 km/h).
         * @param {string} icon - Emoji icon for the metric.
         */
        function detailBox(label, value, icon) {
            return `
                <div class="flex flex-col items-center p-3 bg-white/5 rounded-lg border border-white/10">
                    <p class="text-2xl mb-1">${icon}</p>
                    <p class="text-sm font-semibold text-gray-300">${label}</p>
                    <p class="text-xl font-bold text-accent-blue">${value}</p>
                </div>
            `;
        }

        /**
         * Main function to handle the weather search and rendering.
         */
        async function searchWeather() {
            const city = cityInput.value;
            errorMessageEl.classList.add('hidden'); // Clear previous errors

            if (city.trim() === "") {
                showMessage("Please enter a city name to search.", false);
                return;
            }

            // Show loading state
            weatherDataEl.innerHTML = '';
            loadingSpinner.classList.remove('hidden');
            appBody.style.opacity = 0.7; // Dim the background slightly during loading

            try {
                const data = await fetchWeather(city);
                
                // 1. Render the detailed weather HTML
                weatherDataEl.innerHTML = generateWeatherHtml(data);
                
                // 2. Set the dynamic background
                setDynamicBackground(data.current.condition);

            } catch (error) {
                // Display error message
                weatherDataEl.innerHTML = `
                    <div class="text-center p-6 bg-red-900/40 rounded-xl border border-red-500/50">
                        <p class="text-2xl font-semibold text-red-300 mb-2">City Not Found</p>
                        <p class="text-gray-200">${error.message}</p>
                        <p class="mt-4 text-sm text-gray-400">Please check your spelling or try a simulated city.</p>
                    </div>
                `;
                setDynamicBackground('default'); // Reset background on error
            } finally {
                // Hide loading state and reset opacity
                loadingSpinner.classList.add('hidden');
                appBody.style.opacity = 1; 
            }
        }
    </script>
</body>
</html>

